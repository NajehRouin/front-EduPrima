{
    "sourceFile": "src/components/ModalAjoutEleve.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1748471357170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1748471357170,
            "name": "Commit-0",
            "content": "import React, { useState } from \"react\";\r\nimport Api from \"../Api/Eleve\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nfunction ModalAjoutEleve({ isOpen, closeModal, selectedClasse, fetchdata }) {\r\n  const [nom, setNom] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [motDePasse, setMotDePasse] = useState(\"\");\r\n\r\n  const handleSubmit = async () => {\r\n    const formData = {\r\n      nom,\r\n      email,\r\n      motDePasse,\r\n      classe: selectedClasse._id,\r\n    };\r\n\r\n    const dataResponse = await fetch(Api.AjouterEleve.url, {\r\n      method: Api.AjouterEleve.method,\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        nom: nom,\r\n        email: email,\r\n        motDePasse: motDePasse,\r\n        classe: selectedClasse._id,\r\n      }),\r\n    });\r\n    const response = await dataResponse.json();\r\n    if (response.success) {\r\n      toast.success(response.msg);\r\n      fetchdata();\r\n      // Après 2 secondes (2000ms), on ferme le modal\r\n      setTimeout(() => {\r\n        closeModal();\r\n      }, 2000);\r\n    } else {\r\n      toast.error(response.msg);\r\n    }\r\n  };\r\n\r\n  return (\r\n    isOpen && (\r\n      <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50\">\r\n        <ToastContainer position=\"top-center\" />\r\n        <div className=\"bg-white p-6 rounded-md shadow-lg w-1/3\">\r\n          <h2 className=\"text-xl font-semibold mb-4\">Ajouter un élève</h2>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-700\">calsse</label>\r\n            <input\r\n              type=\"text\"\r\n              value={selectedClasse.nomClasse}\r\n              disabled\r\n              className=\"border p-2 w-full rounded-md\"\r\n              placeholder=\"Nom de classe\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-700\">Nom && Prénom</label>\r\n            <input\r\n              type=\"text\"\r\n              value={nom}\r\n              onChange={(e) => setNom(e.target.value)}\r\n              className=\"border p-2 w-full rounded-md\"\r\n              placeholder=\"Nom de l'élève\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-700\">Identifiant</label>\r\n            <input\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              className=\"border p-2 w-full rounded-md\"\r\n              placeholder=\"Email de l'élève\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-700\">Mot de passe</label>\r\n            <input\r\n              type=\"password\"\r\n              value={motDePasse}\r\n              onChange={(e) => setMotDePasse(e.target.value)}\r\n              className=\"border p-2 w-full rounded-md\"\r\n              placeholder=\"Mot de passe\"\r\n            />\r\n          </div>\r\n          <div className=\"flex justify-end gap-4\">\r\n            <button\r\n              onClick={closeModal}\r\n              className=\"bg-gray-300 text-gray-700 px-4 py-2 rounded-md\"\r\n            >\r\n              Annuler\r\n            </button>\r\n            <button\r\n              onClick={handleSubmit}\r\n              className=\"bg-blue-500 text-white px-4 py-2 rounded-md\"\r\n            >\r\n              Ajouter\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default ModalAjoutEleve;\r\n"
        }
    ]
}