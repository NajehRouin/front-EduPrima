{
    "sourceFile": "src/components/AjouterEleve.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1748471246698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748471262636,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,9 @@\n         <div className=\"bg-white p-6 rounded-md shadow-lg w-1/3\">\r\n           <h2 className=\"text-xl font-semibold mb-4\">Ajouter un élève</h2>\r\n \r\n           <div className=\"mb-4\">\r\n-            <label className=\"block text-gray-700\">Nom et Prénom</label>\r\n+            <label className=\"block text-gray-700\">Nom && Prénom</label>\r\n             <input\r\n               type=\"text\"\r\n               value={nom}\r\n               onChange={(e) => setNom(e.target.value)}\r\n"
                }
            ],
            "date": 1748471246698,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\r\nimport Api from \"../Api/Eleve\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Apiclasse from \"../Api/classe\";\r\n\r\nfunction AjouterEleve({ isOpen, closeModal, fetchdata }) {\r\n  const [nom, setNom] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [motDePasse, setMotDePasse] = useState(\"\");\r\n  const [classe, SetClasse] = useState(\"\");\r\n  const [otherClasses, setOtherClasses] = useState([]);\r\n\r\n  const getAllClasses = async () => {\r\n    try {\r\n      const dataResponse = await fetch(Apiclasse.getAllClasse.url, {\r\n        method: Apiclasse.getAllClasse.method,\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n\r\n      const response = await dataResponse.json();\r\n\r\n      setOtherClasses(response?.result || []);\r\n    } catch (error) {\r\n      console.log(\"errrrr\", error);\r\n    }\r\n  };\r\n\r\n  const handleAddClasse = (e) => {\r\n    SetClasse(e.target.value);\r\n  };\r\n  useEffect(() => {\r\n    getAllClasses();\r\n  }, []);\r\n\r\n  const handleSubmit = async () => {\r\n    const dataResponse = await fetch(Api.AjouterEleve.url, {\r\n      method: Api.AjouterEleve.method,\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        nom: nom,\r\n        email: email,\r\n        motDePasse: motDePasse,\r\n        classe: classe,\r\n      }),\r\n    });\r\n    const response = await dataResponse.json();\r\n    if (response.success) {\r\n      toast.success(response.msg);\r\n      fetchdata();\r\n      // Après 2 secondes (2000ms), on ferme le modal\r\n      setTimeout(() => {\r\n        closeModal();\r\n      }, 2000);\r\n    } else {\r\n      toast.error(response.msg);\r\n    }\r\n  };\r\n\r\n  return (\r\n    isOpen && (\r\n      <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50\">\r\n        <ToastContainer position=\"top-center\" />\r\n        <div className=\"bg-white p-6 rounded-md shadow-lg w-1/3\">\r\n          <h2 className=\"text-xl font-semibold mb-4\">Ajouter un élève</h2>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-700\">Nom et Prénom</label>\r\n            <input\r\n              type=\"text\"\r\n              value={nom}\r\n              onChange={(e) => setNom(e.target.value)}\r\n              className=\"border p-2 w-full rounded-md\"\r\n              placeholder=\"Nom de l'élève\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-700\">Identifiant</label>\r\n            <input\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              className=\"border p-2 w-full rounded-md\"\r\n              placeholder=\"Email de l'élève\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-700\">Mot de passe</label>\r\n            <input\r\n              type=\"password\"\r\n              value={motDePasse}\r\n              onChange={(e) => setMotDePasse(e.target.value)}\r\n              className=\"border p-2 w-full rounded-md\"\r\n              placeholder=\"Mot de passe\"\r\n            />\r\n          </div>\r\n\r\n          {/* Liste déroulante pour ajouter d'autres classes */}\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-700\">\r\n              Ajouter d'autres classes\r\n            </label>\r\n            <select\r\n              className=\"border p-2 w-full rounded-md\"\r\n              onChange={handleAddClasse}\r\n              defaultValue=\"\"\r\n            >\r\n              <option value=\"\" disabled>\r\n                Sélectionner une classe\r\n              </option>\r\n              {otherClasses?.map((classe) => (\r\n                <option key={classe._id} value={classe._id}>\r\n                  {classe.niveau} {classe.nomClasse}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-4\">\r\n            <button\r\n              onClick={closeModal}\r\n              className=\"bg-gray-300 text-gray-700 px-4 py-2 rounded-md\"\r\n            >\r\n              Annuler\r\n            </button>\r\n            <button\r\n              onClick={handleSubmit}\r\n              className=\"bg-blue-500 text-white px-4 py-2 rounded-md\"\r\n            >\r\n              Ajouter\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default AjouterEleve;\r\n"
        }
    ]
}